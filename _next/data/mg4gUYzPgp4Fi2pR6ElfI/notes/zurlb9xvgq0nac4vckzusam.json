{"pageProps":{"note":{"id":"zurlb9xvgq0nac4vckzusam","title":"Backend","desc":"","updated":1719306973256,"created":1719241390631,"custom":{},"fname":"monorepo.Backend","type":"note","vault":{"fsPath":".","selfContained":true,"name":"dendron-emi"},"contentHash":"623debfc17121eb6d2734ea683253c7b","links":[],"anchors":{"monorepo--backend":{"type":"header","text":"Monorepo : Backend","value":"monorepo--backend","line":8,"column":0,"depth":1},"constraint_checkers":{"type":"header","text":"constraint_checkers","value":"constraint_checkers","line":11,"column":0,"depth":2},"db_data":{"type":"header","text":"db_data","value":"db_data","line":14,"column":0,"depth":2},"migrations":{"type":"header","text":"migrations","value":"migrations","line":17,"column":0,"depth":2},"src":{"type":"header","text":"src","value":"src","line":26,"column":0,"depth":2},"api":{"type":"header","text":"api","value":"api","line":27,"column":0,"depth":3},"oauth":{"type":"header","text":"oauth","value":"oauth","line":28,"column":0,"depth":4},"ws":{"type":"header","text":"ws","value":"ws","line":31,"column":0,"depth":4},"database":{"type":"header","text":"database","value":"database","line":34,"column":0,"depth":3}},"children":[],"parent":"smclm9qks60i3brdytv436w","data":{}},"body":"<h1 id=\"backend\">Backend<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#backend\"></a></h1>\n<h1 id=\"monorepo--backend\">Monorepo : Backend<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#monorepo--backend\"></a></h1>\n<p>Here we describe the basic structure of the backend of the <a href=\"https://github.com/earth-metabolome-initiative/emi-monorepo/tree/web\">EMI monorepo</a>.</p>\n<h2 id=\"constraint_checkers\"><code>constraint_checkers</code><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#constraint_checkers\"></a></h2>\n<p>This folder contains the metaprogramming code to check the correctness of the database, and then to generate the rust files depending on the constraints.</p>\n<h2 id=\"db_data\"><code>db_data</code><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#db_data\"></a></h2>\n<p>Folder containing csv files with the data that will be inserted into the database. For example, the file <code>countries.csv</code> contains the list of all available/allowed countries in the database.</p>\n<h2 id=\"migrations\"><code>migrations</code><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#migrations\"></a></h2>\n<p>Folder containing the SQL files that are used to create the database schema. The files are numbered in order of execution.\nHere is a brief description of the types of tables:</p>\n<ul>\n<li><code>create_*_table</code> creates a table in the database</li>\n<li><code>create_*_sequential_index</code> changes the <code>id</code> column of the table from INTEGER to SERIAL</li>\n<li><code>populate_*_table</code> populates the table with data from the csv files in the <code>db_data</code> folder</li>\n<li><code>create_*_gin_index</code> creates an index to allow for searching in the table</li>\n<li><code>create_*_can_x_trigger</code> contain a function that takes a user ID (INTEGER) and the primary keys and returns a BOOLEAN indicating whether the user can {operation} the row</li>\n</ul>\n<h2 id=\"src\"><code>src</code><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#src\"></a></h2>\n<h3 id=\"api\"><code>api</code><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#api\"></a></h3>\n<h4 id=\"oauth\"><code>oauth</code><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#oauth\"></a></h4>\n<p>Directory containing the code for the OAuth2.0 authentication and its dependencies (login/logout, login providers, refresh tokens, etc).  </p>\n<h4 id=\"ws\"><code>ws</code><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#ws\"></a></h4>\n<p>Directory containing the code for the websockets.</p>\n<h3 id=\"database\"><code>database</code><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#database\"></a></h3>\n<p>This directory contains the code for the database connection between the backend and the database. We are using the <a href=\"https://diesel.rs/\">Diesel</a> crate to interact with the database. Most of the code in this directory is generated automatically by the <code>constraint_checkers</code> package.</p>","noteIndex":{"id":"3rbfqqbp7pwbkdcrgc97u7l","title":"The Earth Metabolome Initiative","desc":"","updated":1671988421333,"created":1671985562294,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":".","selfContained":true,"name":"dendron-emi"},"contentHash":"4a9583a0623e72b112fd491979429bc1","links":[{"type":"wiki","from":{"fname":"root","id":"3rbfqqbp7pwbkdcrgc97u7l","vaultName":"dendron-emi"},"value":"dendron","position":{"start":{"line":4,"column":69,"offset":257},"end":{"line":4,"column":83,"offset":271},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"dendron"}}],"anchors":{"welcome-to-the-earth-metabolome-initiative-dendron-notes":{"type":"header","text":"Welcome to the Earth Metabolome Initiative Dendron notes","value":"welcome-to-the-earth-metabolome-initiative-dendron-notes","line":7,"column":0,"depth":1},"what-is-the-earth-metabolome-initiative-":{"type":"header","text":"What is the Earth Metabolome Initiative ?","value":"what-is-the-earth-metabolome-initiative-","line":12,"column":0,"depth":1},"how-is-it-related-to-the-digital-botanical-gardens-initiative-":{"type":"header","text":"How is it related to the Digital Botanical Gardens Initiative ?","value":"how-is-it-related-to-the-digital-botanical-gardens-initiative-","line":19,"column":0,"depth":1},"an-open-science-project":{"type":"header","text":"An Open Science project","value":"an-open-science-project","line":24,"column":0,"depth":1},"working-with-the-garage-door-up":{"type":"header","text":"Working with the garage door up","value":"working-with-the-garage-door-up","line":26,"column":0,"depth":2},"open-notebook-science":{"type":"header","text":"Open Notebook Science","value":"open-notebook-science","line":32,"column":0,"depth":2}},"children":["vrae5dt51ddpchgp8ny78cp","l03fwlci5f5rdpot3v7oli6","ifd39krpwjbpoujotes8k8e","4ukw0m9fnolvo16alfg228n","s1ylfmp2pclqnwyr7c4kf7i","gug1zw6wdzvta1evuzc5nut","gz9usdkc2az543npdnopxrs","fzeg276w1meifz5qyccsd4s","yvialv0y265tyn1u4xxygn6","smclm9qks60i3brdytv436w","em044ww0x12gvshkq9s1gp6","3yuaegcggymmvr8og84zkur","cg7slewy3y8h81yvqfao1xt"],"parent":null,"data":{},"body":"# Welcome to the Earth Metabolome Initiative Dendron notes\n\nDendron is the knowledge management system we use in the EMI. We use it specifically to manage notes, lab-books and share ideas.\nIf you want to know more about Dendron, have a look at this section [[dendron.md]].\n\n# What is the Earth Metabolome Initiative ?\n\n\n![](/assets/images/EMI_logo_round.png){max-width: 300px, display: block, margin: 0 auto}\n\nThe Earth Metabolome Initiative, abbreviated EMI, is an Open Science initiative and a global effort to profile the metabolic content of all currently known species on our planet (~2.3 million species). We are building the required computational, scientific and organizational architecture to establish the network of ressources and humans to advance in this massive undertaking. The EMI will explore the chemical foundations of Life for a better human society within a thriving biosphere.\n\n# How is it related to the Digital Botanical Gardens Initiative ?\n\nWe have started the Digital Botanical Gardens Initiative, abbreviated DBGI, as a pilot project for the EMI. You can find more details about the DBGI at <https://www.dbgi.org/dendron-dbgi>.\n\n\n# An Open Science project\n\n## Working with the garage door up\n\nA way of working briefly described by Andy Matuschak here https://notes.andymatuschak.org/z21cgR9K3UcQ5a7yPsj2RUim3oM2TzdBByZu.\n\n![](/assets/images/2022-12-25-18-13-17.png){max-width: 400px}\n\n## Open Notebook Science\n\nIf we apply this \"working with the garage door up\" idea to a scientific research endeavor, we understand it as respecting the core concepts of open-science. These are in fact the principles of Open Notebook Science https://en.wikipedia.org/wiki/Open-notebook_science.\n\nFor the projects of the DBGI, we will follow this approach in order to share early ideas and results but also the less shiny parts of the research projects. \nExpect to find strange ideas, badly formulated text and poorly written code. However if you have time and interest, you should be able to participate at each step of the process. Hopefully, this will lead to enhanced collaboration and participation. Maybe yes, maybe not. Let's make it a methodological experiment!\n\nThe pages of this website are written in Markdown and hosted on Github. You can edit them by clicking on the \"Click here to edit this page on Github !\" link at the bottom of the page\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true,"enableSelfContainedVaults":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":".","selfContained":true,"name":"dendron-emi"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"task","dateFormat":"y.MM.dd","addBehavior":"asOwnDomain","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"taskCompleteStatus":["done","x"],"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"enableFullHierarchyNoteTitle":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Dendron","description":"Personal Knowledge Space"},"github":{"enableEditLink":true,"editLinkText":"Feel free to participate and click here to edit this page on Github !","editBranch":"main","editViewMode":"tree","editRepository":"https://github.com/earth-metabolome-initiative/dendron-emi"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"search","siteUrl":"https://earth-metabolome-initiative.github.io","assetsPrefix":"/dendron-emi","siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true}