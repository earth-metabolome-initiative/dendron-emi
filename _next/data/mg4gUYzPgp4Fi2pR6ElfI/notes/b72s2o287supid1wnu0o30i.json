{"pageProps":{"note":{"id":"b72s2o287supid1wnu0o30i","title":"Hugo","desc":"","updated":1729500400784,"created":1729082115661,"custom":{},"fname":"website.hugo","type":"note","vault":{"fsPath":".","selfContained":true,"name":"dendron-emi"},"contentHash":"ce504bd5741ac697651d310743e023f4","links":[{"from":{"fname":"open-notebook.emi.pmallard.2024.10.07","id":"fvi2bh4uisut81x5q21bjf0","vaultName":"dendron-emi"},"type":"backlink","position":{"start":{"line":15,"column":45,"offset":250},"end":{"line":15,"column":61,"offset":266},"indent":[]},"value":"website.hugo"}],"anchors":{"":{"type":"header","text":"","value":"","line":134,"column":0,"depth":6},"type-members":{"type":"header","text":"type: members","value":"type-members","line":450,"column":0,"depth":2},"type-members-1":{"type":"header","text":"type: members","value":"type-members-1","line":473,"column":0,"depth":2}},"children":[],"parent":"em044ww0x12gvshkq9s1gp6","data":{}},"body":"<h1 id=\"hugo\">Hugo<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#hugo\"></a></h1>\n<ul>\n<li>\n<p>Looking into <a href=\"https://nickballou.com/blog/custom-wowchemy/\">https://nickballou.com/blog/custom-wowchemy/</a> </p>\n</li>\n<li>\n<p>The idea is to replicate the membership page of the Open Traits Network (<a href=\"https://opentraits.org/members/\">https://opentraits.org/members/</a>) on the EMI website.</p>\n</li>\n</ul>\n<p>Looking for old li_compact.html files </p>\n<ul>\n<li><a href=\"https://github.com/forrtproject/forrtproject.github.io/tree/eb55900da7da50390ca23a929794fde9073c7df5\">https://github.com/forrtproject/forrtproject.github.io/tree/eb55900da7da50390ca23a929794fde9073c7df5</a></li>\n</ul>\n<p>This whole story turns out to be a bit more complicated than I thought. I will need to spend more time on this.</p>\n<p>First it seems that the wowchemy is now hugo blox.\nSecond Hugo blox is not compatible with the latest version of Hugo.</p>\n<p>Switching hugo version is not has straightforward.\nInstalling a specific version neither.</p>\n<p><a href=\"https://www.gigigatgat.ca/en/posts/install-specific-hugo-version/\">https://www.gigigatgat.ca/en/posts/install-specific-hugo-version/</a></p>\n<p><a href=\"https://github.com/gohugoio/hugo/releases/tag/v0.121.1\">https://github.com/gohugoio/hugo/releases/tag/v0.121.1</a></p>\n<p>/Users/pma/.gem/ruby/3.3.5/bin:/Users/pma/.rubies/ruby-3.3.5/lib/ruby/gems/3.3.0/bin:/Users/pma/.rubies/ruby-3.3.5/bin:/Users/pma/.pyenv/shims:/Users/pma/.nvm/versions/node/v17.8.0/bin:/Users/pma/.yarn/bin:/Users/pma/.config/yarn/global/node_modules/.bin:/Users/pma/.rbenv/shims:/Users/pma/.cargo/bin:/Users/pma/.local/bin:/usr/local/bin:/bin:/sbin:/usr/local/sbin:/usr/local/bin:/usr/local/texlive/2023/bin/universal-darwin:/Users/pma/bin:/usr/local/bin:/Users/pma/mambaforge/lib/python3.9/site-packages:/usr/local/texlive/2023/bin/universal-darwin:/Users/pma/.nvm/versions/node/v17.8.0/bin:/Users/pma/.yarn/bin:/Users/pma/.config/yarn/global/node_modules/.bin:/Users/pma/.rbenv/shims:/Users/pma/.cargo/bin:/Users/pma/.local/bin:/Users/pma/mambaforge/bin:/Users/pma/mambaforge/condabin:/usr/local/bin:/bin:/sbin:/usr/local/sbin:/usr/local/bin:/usr/local/texlive/2023/bin/universal-darwin:/Users/pma/bin:/usr/local/bin:/Users/pma/mambaforge/lib/python3.9/site-packages:/usr/local/texlive/2023/bin/universal-darwin:/opt/local/bin:/opt/local/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/opt/X11/bin:/usr/local/share/dotnet:~/.dotnet/tools:/Library/Frameworks/Mono.framework/Versions/Current/Commands:/Applications/quarto/bin:/Applications/iTerm.app/Contents/Resources/utilities</p>\n<p>How to embedd a map </p>\n<p><a href=\"https://blog.gpkb.org/posts/hugo-static-site-maps/\">https://blog.gpkb.org/posts/hugo-static-site-maps/</a></p>\n<p>7.114334,46.777595,7.197247,46.822506</p>\n<p>pmtiles extract \\\n<a href=\"https://build.protomaps.com/20241014.pmtiles\">https://build.protomaps.com/20241014.pmtiles</a> \\\nmymap.pmtiles \\\n--bbox=7.114334,46.777595,7.197247,46.822506</p>\n<p><a href=\"https://osgav.run/\">https://osgav.run/</a></p>\n<p>Hinode theme has a leaflet module <a href=\"https://gethinode.com/docs/getting-started/introduction/\">https://gethinode.com/docs/getting-started/introduction/</a></p>\n<p>My leaflet-map.js</p>\n<p>const attribution = '© <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\nconst tile = '<a href=\"https://tile.openstreetmap.org/%7Bz%7D/%7Bx%7D/%7By%7D.png&#x27;\">https://tile.openstreetmap.org/{z}/{x}/{y}.png'</a></p>\n<p>document.querySelectorAll('div.leaflet-map').forEach(map => {\nconst viewLat = map.getAttribute('data-leaflet-view-lat')\nconst viewLong = map.getAttribute('data-leaflet-view-long')\nconst zoom = map.getAttribute('data-leaflet-view-zoom')\nconst popup = map.getAttribute('data-leaflet-popup-caption')\nconst popupLat = map.getAttribute('data-leaflet-popup-lat')\nconst popupLong = map.getAttribute('data-leaflet-popup-long')\nconst view = [viewLat, viewLong]</p>\n<p>  if (viewLat === null || viewLong === null || zoom === null) {\nconsole.error('leaflet-map.js: expected lat, long, and zoom')\n} else {\nconst bind = L.map(map).setView(view, zoom)\nL.tileLayer(tile, { attribution }).addTo(bind)</p>\n<pre><code>if (popup !== null &#x26;&#x26; popupLat !== null &#x26;&#x26; popupLong !== null) {\n  L.marker([popupLat, popupLong]).addTo(bind)\n    .bindPopup(popup)\n    .openPopup()\n}\n</code></pre>\n<p>  }\n})</p>\n<p>My layout/partial/assets/map.html</p>\n<!-- \n    Copyright © 2024 The Hinode Team / Mark Dumay. All rights reserved.\n    Use of this source code is governed by The MIT License (MIT) that can be found in the LICENSE file.\n    Visit gethinode.com/license for more details.\n-->\n<p>{{ $error := false }}</p>\n<!-- Validate arguments -->\n<p>{{ if partial \"utilities/IsInvalidArgs.html\" (dict \"structure\" \"map\" \"args\" .Params) }}\n{{ errorf \"Invalid arguments: %s\" .Position -}}\n{{ $error = true }}\n{{ end }}</p>\n<!-- Initialize arguments -->\n<p>{{- $id := printf \"leaflet-map-%d\" .Ordinal -}}\n{{ with index . \"id\" }}\n{{ $id = . }}\n{{ end }}</p>\n<p>{{ $class := index . \"class\" | default \"ratio ratio-16x9 w-100 mx-auto\" }}</p>\n<p>{{ $error := false }}\n{{ $viewLat := 52.377 }}\n{{ $viewLong := 4.90 }}\n{{ $zoom := 13 }}\n{{ $popup := \"\" }}\n{{ $popupLat := \"\"  }}\n{{ $popupLong := \"\" }}</p>\n<p>{{- with index . \"lat\" }}{{ $viewLat = . }}{{ end -}}\n{{- with index . \"long\" }}{{ $viewLong = . }}{{ end -}}\n{{- with index . \"zoom\" }}{{ $zoom = . }}{{ end -}}\n{{- with index . \"popup\" }}{{ $popup = . }}{{ end -}}\n{{- with index . \"popup-lat\" }}{{ $popupLat = . }}{{ end -}}\n{{- with index . \"popup-long\" }}{{ $popupLong = . }}{{ end -}}</p>\n<!-- Main code -->\n<p>{{- if not $error -}}</p>\n<pre><code>&#x3C;div id=\"{{ $id }}\" class=\"leaflet-map {{ $class }}\"\n    {{ with $viewLat }}data-leaflet-view-lat=\"{{ . }}\"{{ end }}\n    {{ with $viewLong }}data-leaflet-view-long=\"{{ . }}\"{{ end }}\n    {{ with $zoom }}data-leaflet-view-zoom=\"{{ . }}\"{{ end }}\n    {{ with $popup }}data-leaflet-popup-caption=\"{{ . }}\"{{ end }}\n    {{ with $popupLat }}data-leaflet-popup-lat=\"{{ . }}\"{{ end }}\n    {{ with $popupLong }}data-leaflet-popup-long=\"{{ . }}\"{{ end }}>\n&#x3C;/div>\n</code></pre>\n<p>{{- end -}}</p>\n<h6 id=\"\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#\"></a></h6>\n<p>Frontmatter in a content file</p>\n<pre class=\"language-yaml\"><code class=\"language-yaml\">\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">title</span><span class=\"token punctuation\">:</span> Pierre<span class=\"token punctuation\">-</span>Marie Allard\n<span class=\"token key atrule\">firstname</span><span class=\"token punctuation\">:</span> Pierre<span class=\"token punctuation\">-</span>Marie\n<span class=\"token key atrule\">lastname</span><span class=\"token punctuation\">:</span> Allard\n<span class=\"token key atrule\">institution</span><span class=\"token punctuation\">:</span> COMMONS Lab<span class=\"token punctuation\">,</span> Department of Biology<span class=\"token punctuation\">,</span> University of Fribourg<span class=\"token punctuation\">,</span> Switzerland\n<span class=\"token key atrule\">email</span><span class=\"token punctuation\">:</span> pierre<span class=\"token punctuation\">-</span>marie.allard@unifr.ch\n<span class=\"token key atrule\">orcid</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//orcid.org/0000<span class=\"token punctuation\">-</span>0003<span class=\"token punctuation\">-</span>3389<span class=\"token punctuation\">-</span><span class=\"token number\">2191</span>\n<span class=\"token key atrule\">wikidata</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//www.wikidata.org/wiki/Q56451301\n<span class=\"token key atrule\">scholia</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//scholia.toolforge.org/author/Q56451301\n<span class=\"token key atrule\">thumbnail</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">url</span><span class=\"token punctuation\">:</span> /img/sunrise.jpg\n  <span class=\"token key atrule\">author</span><span class=\"token punctuation\">:</span> Harris Vo\n  <span class=\"token key atrule\">authorURL</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//unsplash.com/@hoanvokim\n  <span class=\"token key atrule\">origin</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//unsplash.com/photos/ZX6BPboJrYk\n  <span class=\"token key atrule\">originName</span><span class=\"token punctuation\">:</span> Unsplash\n<span class=\"token key atrule\">modules</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"leaflet\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token key atrule\">latitude</span><span class=\"token punctuation\">:</span> <span class=\"token number\">52.377</span>\n<span class=\"token key atrule\">longitude</span><span class=\"token punctuation\">:</span> <span class=\"token number\">4.900</span>\n<span class=\"token key atrule\">popup</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Amsterdam Central Station is it here?\"</span>\n<span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> members\n<span class=\"token punctuation\">---</span>\n\n</code></pre>\n<p>Such file in layouts/members/single/body.html</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>row<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token comment\">&#x3C;!-- Left column: Member Information --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>col-md-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      {{- /* Display Member Information */ -}}\n      {{ with .Params.author }}\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>p</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>author-entry display-4 mb-3<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>strong</span><span class=\"token punctuation\">></span></span>{{ . }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>strong</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>p</span><span class=\"token punctuation\">></span></span>\n      {{ end }}\n  \n      {{- /* Display Institution, Email, ORCID, Wikidata, and Scholia */ -}}\n      {{ with .Params }}\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>ul</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>metadata-list list-unstyled<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n          {{ with .institution }}\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>strong</span><span class=\"token punctuation\">></span></span>Institution or place of work:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>strong</span><span class=\"token punctuation\">></span></span> {{ . }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>li</span><span class=\"token punctuation\">></span></span>\n          {{ end }}\n          {{ with .email }}\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>strong</span><span class=\"token punctuation\">></span></span>Email:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>strong</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>mailto:{{ . }}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>{{ . }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>li</span><span class=\"token punctuation\">></span></span>\n          {{ end }}\n          {{ with .orcid }}\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>strong</span><span class=\"token punctuation\">></span></span>ORCID:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>strong</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{{ . }}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>{{ . }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>li</span><span class=\"token punctuation\">></span></span>\n          {{ end }}\n          {{ with .wikidata }}\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>strong</span><span class=\"token punctuation\">></span></span>Wikidata:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>strong</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{{ . }}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>{{ . }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>li</span><span class=\"token punctuation\">></span></span>\n          {{ end }}\n          {{ with .scholia }}\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>strong</span><span class=\"token punctuation\">></span></span>Scholia:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>strong</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{{ . }}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>{{ . }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>li</span><span class=\"token punctuation\">></span></span>\n          {{ end }}\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>ul</span><span class=\"token punctuation\">></span></span>\n      {{ end }}\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>div</span><span class=\"token punctuation\">></span></span>\n  \n    <span class=\"token comment\">&#x3C;!-- Right column: Thumbnail Image --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>col-md-4<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      {{- /* Extract thumbnail information */ -}}\n      {{ with .Params.thumbnail }}\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>post-thumbnail mb-5<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{{ .url }}<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Thumbnail<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>img-fluid<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>thumbnail-attribution<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            Photo by <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{{ .authorURL }}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>{{ .author }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>a</span><span class=\"token punctuation\">></span></span> on \n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{{ .origin }}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>{{ .originName }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>a</span><span class=\"token punctuation\">></span></span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>div</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>div</span><span class=\"token punctuation\">></span></span>\n      {{ end }}\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>div</span><span class=\"token punctuation\">></span></span>\n  \n  <span class=\"token comment\">&#x3C;!-- Map Section --></span>\n  {{- /* Render the Map using the Leaflet map partial */ -}}\n  {{ with .Params }}\n    {{ if and .latitude .longitude .popup }}\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>map-container mb-5<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        {{ partial \"assets/map.html\" (dict \"lat\" .latitude \"long\" .longitude \"popup\" .popup \"popup-lat\" .latitude \"popup-long\" .longitude) }}\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>div</span><span class=\"token punctuation\">></span></span>\n    {{ end }}\n  {{ end }}\n\n  \n  \n  {{- /* Render the rest of the content */ -}}\n  {{ partial \"utilities/ProcessContent\" (dict \"page\" .Page \"raw\" .RawContent) }}\n</code></pre>\n<p>and layouts/partials/assets/map.html</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&#x3C;!-- \n    Copyright © 2024 The Hinode Team / Mark Dumay. All rights reserved.\n    Use of this source code is governed by The MIT License (MIT) that can be found in the LICENSE file.\n    Visit gethinode.com/license for more details.\n--></span>\n\n{{ $error := false }}\n\n<span class=\"token comment\">&#x3C;!-- Validate arguments --></span>\n{{ if partial \"utilities/IsInvalidArgs.html\" (dict \"structure\" \"map\" \"args\" .Params) }}\n    {{ errorf \"Invalid arguments: %s\" .Position -}}\n    {{ $error = true }}\n{{ end }}\n\n<span class=\"token comment\">&#x3C;!-- Initialize arguments --></span>\n\n{{- $id := printf \"leaflet-map-%d\" .Ordinal -}}\n{{ with index . \"id\" }}\n    {{ $id = . }}\n{{ end }}\n\n{{ $class := index . \"class\" | default \"ratio ratio-16x9 w-100 mx-auto\" }}\n\n{{ $error := false }}\n{{ $viewLat := 52.377 }}\n{{ $viewLong := 4.90 }}\n{{ $zoom := 13 }}\n{{ $popup := \"\" }}\n{{ $popupLat := \"\"  }}\n{{ $popupLong := \"\" }}\n\n{{- with index . \"lat\" }}{{ $viewLat = . }}{{ end -}}\n{{- with index . \"long\" }}{{ $viewLong = . }}{{ end -}}\n{{- with index . \"zoom\" }}{{ $zoom = . }}{{ end -}}\n{{- with index . \"popup\" }}{{ $popup = . }}{{ end -}}\n{{- with index . \"popup-lat\" }}{{ $popupLat = . }}{{ end -}}\n{{- with index . \"popup-long\" }}{{ $popupLong = . }}{{ end -}}\n\n<span class=\"token comment\">&#x3C;!-- Main code --></span>\n{{- if not $error -}}\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{{ $id }}<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>leaflet-map {{ $class }}<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">{{</span> <span class=\"token attr-name\">with</span> <span class=\"token attr-name\">$viewLat</span> <span class=\"token attr-name\">}}data-leaflet-view-lat</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{{ . }}<span class=\"token punctuation\">\"</span></span><span class=\"token attr-name\">{{</span> <span class=\"token attr-name\">end</span> <span class=\"token attr-name\">}}</span>\n        <span class=\"token attr-name\">{{</span> <span class=\"token attr-name\">with</span> <span class=\"token attr-name\">$viewLong</span> <span class=\"token attr-name\">}}data-leaflet-view-long</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{{ . }}<span class=\"token punctuation\">\"</span></span><span class=\"token attr-name\">{{</span> <span class=\"token attr-name\">end</span> <span class=\"token attr-name\">}}</span>\n        <span class=\"token attr-name\">{{</span> <span class=\"token attr-name\">with</span> <span class=\"token attr-name\">$zoom</span> <span class=\"token attr-name\">}}data-leaflet-view-zoom</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{{ . }}<span class=\"token punctuation\">\"</span></span><span class=\"token attr-name\">{{</span> <span class=\"token attr-name\">end</span> <span class=\"token attr-name\">}}</span>\n        <span class=\"token attr-name\">{{</span> <span class=\"token attr-name\">with</span> <span class=\"token attr-name\">$popup</span> <span class=\"token attr-name\">}}data-leaflet-popup-caption</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{{ . }}<span class=\"token punctuation\">\"</span></span><span class=\"token attr-name\">{{</span> <span class=\"token attr-name\">end</span> <span class=\"token attr-name\">}}</span>\n        <span class=\"token attr-name\">{{</span> <span class=\"token attr-name\">with</span> <span class=\"token attr-name\">$popupLat</span> <span class=\"token attr-name\">}}data-leaflet-popup-lat</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{{ . }}<span class=\"token punctuation\">\"</span></span><span class=\"token attr-name\">{{</span> <span class=\"token attr-name\">end</span> <span class=\"token attr-name\">}}</span>\n        <span class=\"token attr-name\">{{</span> <span class=\"token attr-name\">with</span> <span class=\"token attr-name\">$popupLong</span> <span class=\"token attr-name\">}}data-leaflet-popup-long</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{{ . }}<span class=\"token punctuation\">\"</span></span><span class=\"token attr-name\">{{</span> <span class=\"token attr-name\">end</span> <span class=\"token attr-name\">}}</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>div</span><span class=\"token punctuation\">></span></span>\n{{- end -}}\n</code></pre>\n<p>My leaflet-map.js </p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> attribution <span class=\"token operator\">=</span> <span class=\"token string\">'&#x26;copy; &#x3C;a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap&#x3C;/a> contributors'</span>\n<span class=\"token keyword\">const</span> tile <span class=\"token operator\">=</span> <span class=\"token string\">'https://tile.openstreetmap.org/{z}/{x}/{y}.png'</span>\n\n<span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'div.leaflet-map'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">map</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> viewLat <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data-leaflet-view-lat'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> viewLong <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data-leaflet-view-long'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> zoom <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data-leaflet-view-zoom'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> popup <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data-leaflet-popup-caption'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> popupLat <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data-leaflet-popup-lat'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> popupLong <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data-leaflet-popup-long'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> view <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>viewLat<span class=\"token punctuation\">,</span> viewLong<span class=\"token punctuation\">]</span>\n\n  <span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span>viewLat <span class=\"token operator\">===</span> <span class=\"token keyword null nil\">null</span> <span class=\"token operator\">||</span> viewLong <span class=\"token operator\">===</span> <span class=\"token keyword null nil\">null</span> <span class=\"token operator\">||</span> zoom <span class=\"token operator\">===</span> <span class=\"token keyword null nil\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'leaflet-map.js: expected lat, long, and zoom'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword control-flow\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> bind <span class=\"token operator\">=</span> <span class=\"token constant\">L</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">map</span><span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">setView</span><span class=\"token punctuation\">(</span>view<span class=\"token punctuation\">,</span> zoom<span class=\"token punctuation\">)</span>\n    <span class=\"token constant\">L</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">tileLayer</span><span class=\"token punctuation\">(</span>tile<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> attribution <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">addTo</span><span class=\"token punctuation\">(</span>bind<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span>popup <span class=\"token operator\">!==</span> <span class=\"token keyword null nil\">null</span> <span class=\"token operator\">&#x26;&#x26;</span> popupLat <span class=\"token operator\">!==</span> <span class=\"token keyword null nil\">null</span> <span class=\"token operator\">&#x26;&#x26;</span> popupLong <span class=\"token operator\">!==</span> <span class=\"token keyword null nil\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token constant\">L</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">marker</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>popupLat<span class=\"token punctuation\">,</span> popupLong<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">addTo</span><span class=\"token punctuation\">(</span>bind<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">bindPopup</span><span class=\"token punctuation\">(</span>popup<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">openPopup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<p>With such set of scripts and partials, I can render a map on the member page.\nThis map displays a single marker.</p>\n<p>I would like to be able to render multiple markers and their popup on the map.\nThe expansion of the script should be able to handle single or multiple markers and popups.</p>\n<p>I thought that the frontmatter would look like this ?</p>\n<pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">title</span><span class=\"token punctuation\">:</span> Pierre<span class=\"token punctuation\">-</span>Marie Allard\n<span class=\"token key atrule\">firstname</span><span class=\"token punctuation\">:</span> Pierre<span class=\"token punctuation\">-</span>Marie\n<span class=\"token key atrule\">lastname</span><span class=\"token punctuation\">:</span> Allard\n<span class=\"token key atrule\">institution</span><span class=\"token punctuation\">:</span> COMMONS Lab<span class=\"token punctuation\">,</span> Department of Biology<span class=\"token punctuation\">,</span> University of Fribourg<span class=\"token punctuation\">,</span> Switzerland\n<span class=\"token key atrule\">email</span><span class=\"token punctuation\">:</span> pierre<span class=\"token punctuation\">-</span>marie.allard@unifr.ch\n<span class=\"token key atrule\">orcid</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//orcid.org/0000<span class=\"token punctuation\">-</span>0003<span class=\"token punctuation\">-</span>3389<span class=\"token punctuation\">-</span><span class=\"token number\">2191</span>\n<span class=\"token key atrule\">wikidata</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//www.wikidata.org/wiki/Q56451301\n<span class=\"token key atrule\">scholia</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//scholia.toolforge.org/author/Q56451301\n<span class=\"token key atrule\">thumbnail</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">url</span><span class=\"token punctuation\">:</span> /img/sunrise.jpg\n  <span class=\"token key atrule\">author</span><span class=\"token punctuation\">:</span> Harris Vo\n  <span class=\"token key atrule\">authorURL</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//unsplash.com/@hoanvokim\n  <span class=\"token key atrule\">origin</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//unsplash.com/photos/ZX6BPboJrYk\n  <span class=\"token key atrule\">originName</span><span class=\"token punctuation\">:</span> Unsplash\n<span class=\"token key atrule\">modules</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"leaflet\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token key atrule\">latitude</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">52.377</span><span class=\"token punctuation\">,</span> <span class=\"token number\">52.378</span><span class=\"token punctuation\">]</span>\n<span class=\"token key atrule\">longitude</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">4.900</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4.901</span><span class=\"token punctuation\">]</span>\n<span class=\"token key atrule\">popup</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"Amsterdam Central Station is it here?\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Amsterdam Central Station is it here?\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> members\n<span class=\"token punctuation\">---</span>\n</code></pre>\n<p>Could you help me adapt the previous script where it is needed ?</p>\n<p>Now I also have layouts/partials/assets/custom-map.html</p>\n<pre class=\"language-html\"><code class=\"language-html\">{{ $error := false }}\n\n{{/* Validate arguments */}}\n{{ if partial \"utilities/IsInvalidArgs.html\" (dict \"structure\" \"custom-map\" \"args\" . \"group\" \"partial\") }}\n  {{- errorf \"partial [assets/list.html] - Invalid arguments\" -}}\n  {{ $error = true }}\n{{ end }}\n\n{{/* Initialize arguments */}}\n{{- $list := .list -}}\n{{- $class := .class -}}\n\n{{/* Main code */}}\n{{ if not $error }}\n  {{- range $index, $item := $list }}\n    {{ with $item.Params }}\n      {{ if and $item.Params.latitude $item.Params.longitude $item.Params.popup }}\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>container-fluid p-0<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>map-container mb-5<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            {{ partial \"assets/map.html\" (dict \"lat\" $item.Params.latitude \"long\" $item.Params.longitude \"popup\" $item.Params.popup \"popup-lat\" $item.Params.latitude \"popup-long\" $item.Params.longitude) }}\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>div</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>div</span><span class=\"token punctuation\">></span></span>\n\n        {{- /* Stops after the first valid item */ -}}\n        {{- break -}}\n\n      {{ end }}\n    {{ end }}\n  {{ end }}\n{{ end }}\n</code></pre>\n<p>Which is able to iterate over a list of items.\nFor now it is just a draft and it breaks after one iteration.\nCould you help me adapt the previous script where it is needed so that it iterates over the list of items and displays all the markers and popups on one single map ?</p>\n<p>In this script.</p>\n<p>const attribution = '© <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\nconst tile = '<a href=\"https://tile.openstreetmap.org/%7Bz%7D/%7Bx%7D/%7By%7D.png&#x27;\">https://tile.openstreetmap.org/{z}/{x}/{y}.png'</a></p>\n<p>document.querySelectorAll('div.leaflet-map').forEach(map => {\nconst viewLat = map.getAttribute('data-leaflet-view-lat')\nconst viewLong = map.getAttribute('data-leaflet-view-long')\nconst zoom = map.getAttribute('data-leaflet-view-zoom')\nconst popupData = map.getAttribute('data-leaflet-popup-caption')  // This will now store a JSON string</p>\n<p>  if (viewLat === null || viewLong === null || zoom === null) {\nconsole.error('leaflet-map.js: expected lat, long, and zoom')\n} else {\nconst bind = L.map(map).setView([viewLat, viewLong], zoom)\nL.tileLayer(tile, { attribution }).addTo(bind)</p>\n<pre><code>// Parse popupData as an array\nconst popups = popupData ? JSON.parse(popupData) : []\nconst popupLatitudes = map.getAttribute('data-leaflet-popup-lat') ? JSON.parse(map.getAttribute('data-leaflet-popup-lat')) : []\nconst popupLongitudes = map.getAttribute('data-leaflet-popup-long') ? JSON.parse(map.getAttribute('data-leaflet-popup-long')) : []\n\nif (popups.length &#x26;&#x26; popupLatitudes.length &#x26;&#x26; popupLongitudes.length) {\n  for (let i = 0; i &#x3C; popups.length; i++) {\n    if (popupLatitudes[i] &#x26;&#x26; popupLongitudes[i]) {\n      L.marker([popupLatitudes[i], popupLongitudes[i]]).addTo(bind)\n        .bindPopup(popups[i])\n        .openPopup()\n    }\n  }\n}\n</code></pre>\n<p>  }\n})</p>\n<p>Is it possible to make sure that this will work for entries with a single marker and popup as well as for entries with multiple markers and popups ?</p>\n<p>That is for frontmatters such </p>\n<p>title: Pierre-Marie Allard\nfirstname: Pierre-Marie\nlastname: Allard\ninstitution: COMMONS Lab, Department of Biology, University of Fribourg, Switzerland\nemail: <a href=\"/dendron-emi/mailto:pierre-marie.allard@unifr.ch\">pierre-marie.allard@unifr.ch</a>\norcid: <a href=\"https://orcid.org/0000-0003-3389-2191\">https://orcid.org/0000-0003-3389-2191</a>\nwikidata: <a href=\"https://www.wikidata.org/wiki/Q56451301\">https://www.wikidata.org/wiki/Q56451301</a>\nscholia: <a href=\"https://scholia.toolforge.org/author/Q56451301\">https://scholia.toolforge.org/author/Q56451301</a>\nthumbnail:\nurl: /img/sunrise.jpg\nauthor: Harris Vo\nauthorURL: <a href=\"https://unsplash.com/@hoanvokim\">https://unsplash.com/@hoanvokim</a>\norigin: <a href=\"https://unsplash.com/photos/ZX6BPboJrYk\">https://unsplash.com/photos/ZX6BPboJrYk</a>\noriginName: Unsplash\nmodules: [\"leaflet\"]\nlatitude: [52.377, 52.378]\nlongitude: [4.900, 4.901]\npopup: [\"Amsterdam Central Station is it here?\", \"Amsterdam Central Station is it here?\"]</p>\n<h2 id=\"type-members\">type: members<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#type-members\"></a></h2>\n<p>or</p>\n<p>title: Pierre-Marie Allard\nfirstname: Pierre-Marie\nlastname: Allard\ninstitution: COMMONS Lab, Department of Biology, University of Fribourg, Switzerland\nemail: <a href=\"/dendron-emi/mailto:pierre-marie.allard@unifr.ch\">pierre-marie.allard@unifr.ch</a>\norcid: <a href=\"https://orcid.org/0000-0003-3389-2191\">https://orcid.org/0000-0003-3389-2191</a>\nwikidata: <a href=\"https://www.wikidata.org/wiki/Q56451301\">https://www.wikidata.org/wiki/Q56451301</a>\nscholia: <a href=\"https://scholia.toolforge.org/author/Q56451301\">https://scholia.toolforge.org/author/Q56451301</a>\nthumbnail:\nurl: /img/sunrise.jpg\nauthor: Harris Vo\nauthorURL: <a href=\"https://unsplash.com/@hoanvokim\">https://unsplash.com/@hoanvokim</a>\norigin: <a href=\"https://unsplash.com/photos/ZX6BPboJrYk\">https://unsplash.com/photos/ZX6BPboJrYk</a>\noriginName: Unsplash\nmodules: [\"leaflet\"]\nlatitude: 52.377\nlongitude: 4.900\npopup: \"Amsterdam Central Station is it here?\"</p>\n<h2 id=\"type-members-1\">type: members<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#type-members-1\"></a></h2>\n<p>OK this doesnt work. I will need to find a way to make it work.</p>\n<p>Lets rather work on the map.html</p>\n<p>Currently the map.html is </p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&#x3C;!-- \n    Copyright © 2024 The Hinode Team / Mark Dumay. All rights reserved.\n    Use of this source code is governed by The MIT License (MIT) that can be found in the LICENSE file.\n    Visit gethinode.com/license for more details.\n--></span>\n\n{{ $error := false }}\n\n<span class=\"token comment\">&#x3C;!-- Validate arguments --></span>\n{{ if partial \"utilities/IsInvalidArgs.html\" (dict \"structure\" \"map\" \"args\" .Params) }}\n    {{ errorf \"Invalid arguments: %s\" .Position -}}\n    {{ $error = true }}\n{{ end }}\n\n<span class=\"token comment\">&#x3C;!-- Initialize arguments --></span>\n\n{{- $id := printf \"leaflet-map-%d\" .Ordinal -}}\n{{ with index . \"id\" }}\n    {{ $id = . }}\n{{ end }}\n\n{{ $class := index . \"class\" | default \"ratio ratio-16x9 w-100 mx-auto\" }}\n\n{{ $error := false }}\n{{ $viewLat := 52.377 }}\n{{ $viewLong := 4.90 }}\n{{ $zoom := 13 }}\n{{ $popup := \"\" }}\n{{ $popupLat := \"\"  }}\n{{ $popupLong := \"\" }}\n\n{{- with index . \"lat\" }}{{ $viewLat = . }}{{ end -}}\n{{- with index . \"long\" }}{{ $viewLong = . }}{{ end -}}\n{{- with index . \"zoom\" }}{{ $zoom = . }}{{ end -}}\n{{- with index . \"popup\" }}{{ $popup = . }}{{ end -}}\n{{- with index . \"popup-lat\" }}{{ $popupLat = . }}{{ end -}}\n{{- with index . \"popup-long\" }}{{ $popupLong = . }}{{ end -}}\n\n{{- if not $error -}}\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{{ $id }}<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>leaflet-map {{ $class }}<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">{{</span> <span class=\"token attr-name\">with</span> <span class=\"token attr-name\">$viewLat</span> <span class=\"token attr-name\">}}data-leaflet-view-lat</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{{ index $viewLat 0 }}<span class=\"token punctuation\">\"</span></span><span class=\"token attr-name\">{{</span> <span class=\"token attr-name\">end</span> <span class=\"token attr-name\">}}</span>\n      <span class=\"token attr-name\">{{</span> <span class=\"token attr-name\">with</span> <span class=\"token attr-name\">$viewLong</span> <span class=\"token attr-name\">}}data-leaflet-view-long</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{{ index $viewLong 0 }}<span class=\"token punctuation\">\"</span></span><span class=\"token attr-name\">{{</span> <span class=\"token attr-name\">end</span> <span class=\"token attr-name\">}}</span>\n      <span class=\"token attr-name\">{{</span> <span class=\"token attr-name\">with</span> <span class=\"token attr-name\">$zoom</span> <span class=\"token attr-name\">}}data-leaflet-view-zoom</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{{ . }}<span class=\"token punctuation\">\"</span></span><span class=\"token attr-name\">{{</span> <span class=\"token attr-name\">end</span> <span class=\"token attr-name\">}}</span>\n      <span class=\"token attr-name\">{{</span> <span class=\"token attr-name\">with</span> <span class=\"token attr-name\">$popup</span> <span class=\"token attr-name\">}}</span>\n        <span class=\"token attr-name\">data-leaflet-popup-caption</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>{{ jsonify $popup }}<span class=\"token punctuation\">'</span></span>\n        <span class=\"token attr-name\">data-leaflet-popup-lat</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>{{ jsonify $popupLat }}<span class=\"token punctuation\">'</span></span>\n        <span class=\"token attr-name\">data-leaflet-popup-long</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>{{ jsonify $popupLong }}<span class=\"token punctuation\">'</span></span>\n      <span class=\"token attr-name\">{{</span> <span class=\"token attr-name\">end</span> <span class=\"token attr-name\">}}</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>div</span><span class=\"token punctuation\">></span></span>\n{{- end -}}\n</code></pre>\n<p>Let's try to make it work for multiple markers and popups.</p>\n<p>It should handle the cases where there is only one marker and popup as well as the cases where there are multiple markers and popups.</p>\n<p>That is when value of latitude and longitude are arrays and when the value of popup is an array, or when the value of latitude and longitude are single values and the value of popup is a single value.</p>\n<p>Eg.</p>\n<pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">title</span><span class=\"token punctuation\">:</span> Pierre<span class=\"token punctuation\">-</span>Marie Allard\n<span class=\"token key atrule\">firstname</span><span class=\"token punctuation\">:</span> Pierre<span class=\"token punctuation\">-</span>Marie\n<span class=\"token key atrule\">lastname</span><span class=\"token punctuation\">:</span> allardpm\n<span class=\"token key atrule\">latitude</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">52.377</span><span class=\"token punctuation\">,</span> <span class=\"token number\">52.378</span><span class=\"token punctuation\">]</span>\n<span class=\"token key atrule\">longitude</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">4.900</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4.901</span><span class=\"token punctuation\">]</span>\n<span class=\"token key atrule\">popup</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"Amsterdam Central Station is it here?\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Amsterdam Central Station is it here?\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">---</span>\n</code></pre>\n<p>or</p>\n<pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">title</span><span class=\"token punctuation\">:</span> Pierre<span class=\"token punctuation\">-</span>Marie Allard\n<span class=\"token key atrule\">firstname</span><span class=\"token punctuation\">:</span> Pierre<span class=\"token punctuation\">-</span>Marie\n<span class=\"token key atrule\">lastname</span><span class=\"token punctuation\">:</span> allardpm\n<span class=\"token key atrule\">latitude</span><span class=\"token punctuation\">:</span> <span class=\"token number\">52.377</span>\n<span class=\"token key atrule\">longitude</span><span class=\"token punctuation\">:</span> <span class=\"token number\">4.900</span>\n<span class=\"token key atrule\">popup</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Amsterdam Central Station is it here?\"</span>\n<span class=\"token punctuation\">---</span>\n</code></pre>\n<p>It's working ! Almost good :)\nI can now display the multiple markers.</p>\n<p>One thing is not OK is that I can view all popups. I can only view the last one.</p>\n<p>Does this has to do with </p>\n<p>const attribution = '© <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\nconst tile = '<a href=\"https://tile.openstreetmap.org/%7Bz%7D/%7Bx%7D/%7By%7D.png&#x27;\">https://tile.openstreetmap.org/{z}/{x}/{y}.png'</a></p>\n<p>document.querySelectorAll('div.leaflet-map').forEach(map => {\nconst viewLat = map.getAttribute('data-leaflet-view-lat')\nconst viewLong = map.getAttribute('data-leaflet-view-long')\nconst zoom = map.getAttribute('data-leaflet-view-zoom')\nconst popupData = map.getAttribute('data-leaflet-popup-caption')  // This will now store a JSON string</p>\n<p>  if (viewLat === null || viewLong === null || zoom === null) {\nconsole.error('leaflet-map.js: expected lat, long, and zoom')\n} else {\nconst bind = L.map(map).setView([viewLat, viewLong], zoom)\nL.tileLayer(tile, { attribution }).addTo(bind)</p>\n<pre><code>// Parse popupData as an array\nconst popups = popupData ? JSON.parse(popupData) : []\nconst popupLatitudes = map.getAttribute('data-leaflet-popup-lat') ? JSON.parse(map.getAttribute('data-leaflet-popup-lat')) : []\nconst popupLongitudes = map.getAttribute('data-leaflet-popup-long') ? JSON.parse(map.getAttribute('data-leaflet-popup-long')) : []\n\nif (popups.length &#x26;&#x26; popupLatitudes.length &#x26;&#x26; popupLongitudes.length) {\n  for (let i = 0; i &#x3C; popups.length; i++) {\n    if (popupLatitudes[i] &#x26;&#x26; popupLongitudes[i]) {\n      L.marker([popupLatitudes[i], popupLongitudes[i]]).addTo(bind)\n        .bindPopup(popups[i])\n        .openPopup()\n    }\n  }\n}\n</code></pre>\n<p>  }\n})</p>\n<hr>\n<strong>Backlinks</strong>\n<ul>\n<li><a href=\"/dendron-emi/notes/fvi2bh4uisut81x5q21bjf0\">2024-10-07</a></li>\n</ul>","noteIndex":{"id":"3rbfqqbp7pwbkdcrgc97u7l","title":"The Earth Metabolome Initiative","desc":"","updated":1671988421333,"created":1671985562294,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":".","selfContained":true,"name":"dendron-emi"},"contentHash":"4a9583a0623e72b112fd491979429bc1","links":[{"type":"wiki","from":{"fname":"root","id":"3rbfqqbp7pwbkdcrgc97u7l","vaultName":"dendron-emi"},"value":"dendron","position":{"start":{"line":4,"column":69,"offset":257},"end":{"line":4,"column":83,"offset":271},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"dendron"}}],"anchors":{"welcome-to-the-earth-metabolome-initiative-dendron-notes":{"type":"header","text":"Welcome to the Earth Metabolome Initiative Dendron notes","value":"welcome-to-the-earth-metabolome-initiative-dendron-notes","line":7,"column":0,"depth":1},"what-is-the-earth-metabolome-initiative-":{"type":"header","text":"What is the Earth Metabolome Initiative ?","value":"what-is-the-earth-metabolome-initiative-","line":12,"column":0,"depth":1},"how-is-it-related-to-the-digital-botanical-gardens-initiative-":{"type":"header","text":"How is it related to the Digital Botanical Gardens Initiative ?","value":"how-is-it-related-to-the-digital-botanical-gardens-initiative-","line":19,"column":0,"depth":1},"an-open-science-project":{"type":"header","text":"An Open Science project","value":"an-open-science-project","line":24,"column":0,"depth":1},"working-with-the-garage-door-up":{"type":"header","text":"Working with the garage door up","value":"working-with-the-garage-door-up","line":26,"column":0,"depth":2},"open-notebook-science":{"type":"header","text":"Open Notebook Science","value":"open-notebook-science","line":32,"column":0,"depth":2}},"children":["vrae5dt51ddpchgp8ny78cp","l03fwlci5f5rdpot3v7oli6","ifd39krpwjbpoujotes8k8e","4ukw0m9fnolvo16alfg228n","s1ylfmp2pclqnwyr7c4kf7i","gug1zw6wdzvta1evuzc5nut","gz9usdkc2az543npdnopxrs","fzeg276w1meifz5qyccsd4s","yvialv0y265tyn1u4xxygn6","smclm9qks60i3brdytv436w","em044ww0x12gvshkq9s1gp6","3yuaegcggymmvr8og84zkur","cg7slewy3y8h81yvqfao1xt"],"parent":null,"data":{},"body":"# Welcome to the Earth Metabolome Initiative Dendron notes\n\nDendron is the knowledge management system we use in the EMI. We use it specifically to manage notes, lab-books and share ideas.\nIf you want to know more about Dendron, have a look at this section [[dendron.md]].\n\n# What is the Earth Metabolome Initiative ?\n\n\n![](/assets/images/EMI_logo_round.png){max-width: 300px, display: block, margin: 0 auto}\n\nThe Earth Metabolome Initiative, abbreviated EMI, is an Open Science initiative and a global effort to profile the metabolic content of all currently known species on our planet (~2.3 million species). We are building the required computational, scientific and organizational architecture to establish the network of ressources and humans to advance in this massive undertaking. The EMI will explore the chemical foundations of Life for a better human society within a thriving biosphere.\n\n# How is it related to the Digital Botanical Gardens Initiative ?\n\nWe have started the Digital Botanical Gardens Initiative, abbreviated DBGI, as a pilot project for the EMI. You can find more details about the DBGI at <https://www.dbgi.org/dendron-dbgi>.\n\n\n# An Open Science project\n\n## Working with the garage door up\n\nA way of working briefly described by Andy Matuschak here https://notes.andymatuschak.org/z21cgR9K3UcQ5a7yPsj2RUim3oM2TzdBByZu.\n\n![](/assets/images/2022-12-25-18-13-17.png){max-width: 400px}\n\n## Open Notebook Science\n\nIf we apply this \"working with the garage door up\" idea to a scientific research endeavor, we understand it as respecting the core concepts of open-science. These are in fact the principles of Open Notebook Science https://en.wikipedia.org/wiki/Open-notebook_science.\n\nFor the projects of the DBGI, we will follow this approach in order to share early ideas and results but also the less shiny parts of the research projects. \nExpect to find strange ideas, badly formulated text and poorly written code. However if you have time and interest, you should be able to participate at each step of the process. Hopefully, this will lead to enhanced collaboration and participation. Maybe yes, maybe not. Let's make it a methodological experiment!\n\nThe pages of this website are written in Markdown and hosted on Github. You can edit them by clicking on the \"Click here to edit this page on Github !\" link at the bottom of the page\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true,"enableSelfContainedVaults":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":".","selfContained":true,"name":"dendron-emi"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"task","dateFormat":"y.MM.dd","addBehavior":"asOwnDomain","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"taskCompleteStatus":["done","x"],"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"enableFullHierarchyNoteTitle":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Dendron","description":"Personal Knowledge Space"},"github":{"enableEditLink":true,"editLinkText":"Feel free to participate and click here to edit this page on Github !","editBranch":"main","editViewMode":"tree","editRepository":"https://github.com/earth-metabolome-initiative/dendron-emi"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"search","siteUrl":"https://earth-metabolome-initiative.github.io","assetsPrefix":"/dendron-emi","siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true}